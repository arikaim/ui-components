{%- set charset = head.charset|default('utf-8') -%}
{%- set robots = head.robots|default('index,follow') -%}
{%- set cache_control = head.cache_control|default("max-age=31536000") -%}
{%- set initial_scale = head.initial_scale|default("1.0") -%}
{%- set minimum_scale = head.minimum_scale|default("1.0") -%}
{%- set maximum_scale = head.maximum_scale|default("1.0") -%}
{%- set language = current_language|default('en') %}
{%- set exclude = ['viewport','favicon','og','twitter'] -%}

<head lang="{{ language }}">   
    <meta name="robots" content="index, follow, all" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>{{ head.title }}</title>
    <meta charset="{{ charset }}">  
    <base href="{{ base_url }}"/>
    <meta name="language" content="{{ language }}">
    <meta name="robots" content="{{ robots }}"/>
    <meta name="googlebot" content="{{ robots }}"/>
    <meta name="Cache-Control" content="{{ cache_control }}"/>
    {% for key,value in head %}      
    {%- if value is not empty and key not in exclude -%}
        <meta name="{{ key }}" content="{{ value }}"/>
    {% endif %}
    {% endfor %}
    {%- for item in head.og %}
    <meta property="og:{{ item.name }}" content="{{ item.value }}"/>
    {% for key, value in item.options %}
    <meta property="og:{{ item.name }}:{{ key }}" content="{{ value }}"/>
    {% endfor -%}
    {%- endfor -%}
    {%- for item in head.twitter %}
    <meta name="twitter:{{ item.name }}" content="{{ item.value }}"/>
    {% endfor -%}
    {%- if head.favicon is defined -%}
    <link rel="icon" type="image/png" href="{{ head.favicon }}">
    {%- endif %}    
    <meta name="viewport" content="width=device-width,initial-scale={{ initial_scale }}, minimum-scale={{ minimum_scale }}, maximum-scale={{ maximum_scale }}, user-scalable=no"/>
    <!-- library files -->
    {% for file in library_files -%}        
    {%- if file.params is iterable -%}
        {%- set params_attributes = '' -%}
        {%- for name,value in file.params -%}
            {%- set params_attributes = params_attributes ~ name ~ '="' ~ value ~ '"' -%}
        {%- endfor -%}
        {%- set params_attributes = ' ' ~ params_attributes -%}  
    {%- endif -%}      
    {%- set async = (file.async == true) ? ' async' : '' -%}  
    {%- if file.type == "js" -%} 
    <script id="library_{{ file.library }}" type="text/javascript" src="{{ file.file }}" {{- params_attributes|raw -}} {{- async -}} {{- file.crossorigin|attr('crossorigin') -}}></script>
    {% endif %}
    {%- if file.type == "css" -%} 
    <link rel="stylesheet" type="text/css" href="{{ file.file }}">
    {% endif -%}
    {%- endfor -%}      
    <!-- template files -->
    {% for file in template_files['js'] -%}
    <script src="{{ file }}" type="text/javascript"></script>
    {% endfor %}
    {%- for file in template_files['css'] -%}
    <link rel="stylesheet" type="text/css" href="{{ file }}">      
    {% endfor -%}
    <!-- component files --> 
    {% for file in component_files['js'] %}            
    {%- set async = ('async' in file.params) ? 'async' : '' -%}
    {%- set crossorigin = ('crossorigin' in file.params) ? 'crossorigin="anonymous"' : '' -%}
    <script class="component-file" component-name="{{ file.component_name }}" src="{{ file.url }}" type="text/javascript" {{ async }} {{ crossorigin -}}></script>
    {% endfor -%}
    {% for file in component_files['css'] -%}
    <link rel="stylesheet" type="text/css" href="{{ file.url }}">
    {% endfor -%}
    <!-- page files -->
    {% for file in page_files['js'] -%}        
        <script src="{{ file.url }}" type="text/javascript"></script>
    {%- endfor -%}
    {%- for file in page_files['css'] %}
        <link rel="stylesheet" type="text/css" href="{{ file.url }}">      
    {%- endfor -%}     
    {{- content -}}
</head>